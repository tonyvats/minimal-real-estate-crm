# Инструкция по деплою на GitHub Pages

## Шаги для деплоя:

### 1. Создайте репозиторий на GitHub

Если еще не создали:
- Перейдите на https://github.com/new
- Создайте новый репозиторий (например, `crm-недвижимость`)
- **НЕ** инициализируйте с README, .gitignore или лицензией (у нас уже есть)

### 2. Подключите локальный репозиторий к GitHub

```bash
# Добавьте remote (замените YOUR_USERNAME и REPO_NAME на ваши)
git remote add origin https://github.com/YOUR_USERNAME/REPO_NAME.git

# Отправьте код
git branch -M main
git push -u origin main
```

### 3. Включите GitHub Pages

1. Перейдите в Settings вашего репозитория на GitHub
2. В левом меню выберите **Pages**
3. В разделе **Source** выберите:
   - **Source**: `GitHub Actions`
4. Сохраните изменения

### 4. Настройте имя репозитория в workflow

Откройте файл `.github/workflows/deploy.yml` и замените имя репозитория в строке:
```yaml
VITE_REPO_NAME: ${{ github.event.repository.name }}
```

Если ваше имя репозитория содержит кириллицу или пробелы, укажите его явно:
```yaml
VITE_REPO_NAME: "crm-недвижимость"  # или ваше имя репозитория
```

### 5. Запустите деплой

После каждого push в ветку `main` GitHub Actions автоматически:
1. Соберет проект
2. Задеплоит его на GitHub Pages

### 6. Доступ к сайту

Ваш сайт будет доступен по адресу:
```
https://YOUR_USERNAME.github.io/REPO_NAME/
```

Например:
```
https://username.github.io/crm-недвижимость/
```

## Важные замечания:

1. **Имя репозитория**: Если имя репозитория содержит пробелы или кириллицу, GitHub может автоматически преобразовать его. Проверьте точное имя в URL репозитория.

2. **Первый деплой**: После первого push подождите несколько минут, пока GitHub Actions выполнит сборку и деплой.

3. **Проверка деплоя**: 
   - Перейдите в раздел **Actions** вашего репозитория
   - Убедитесь, что workflow выполнился успешно
   - Если есть ошибки, проверьте логи

4. **Обновление сайта**: Каждый раз при push в `main` сайт будет автоматически обновляться.

## Локальная проверка сборки:

Перед деплоем можно проверить сборку локально:

```bash
cd frontend

# Установите имя репозитория (замените на ваше)
export VITE_REPO_NAME="crm-недвижимость"

# Соберите проект
npm run build

# Предпросмотр сборки
npm run preview
```

## Решение проблем:

### Сайт показывает 404
- Проверьте, что в `vite.config.js` правильно указан `base` path
- Убедитесь, что имя репозитория в workflow совпадает с реальным именем

### Роутинг не работает
- Убедитесь, что в `App.jsx` используется `basename={basename}`
- Проверьте, что все ссылки используют относительные пути

### GitHub Actions не запускается
- Убедитесь, что включен GitHub Pages с источником "GitHub Actions"
- Проверьте, что файл `.github/workflows/deploy.yml` находится в репозитории

